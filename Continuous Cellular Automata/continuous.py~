import math
from PIL import Image, ImageDraw


def rep(start):
    s=[0]
    t=[(start[i-1], start[i], start[i+1]) for i in range(1, len(start)-1)]

    for R in t:
        if t.index(R) == 0:
            w = ((float(R[1]) + float(R[2])) / 2) + PARAM
        elif t.index(R) == len(t)-1:
            w = ((float(R[0]) + float(R[1])) / 2) + PARAM
        else:
            w = ((float(R[0]) + float(R[1]) + float(R[2])) / 3) + PARAM
            
        f,i = math.modf(w)
        s.append(f)
        
    s.append(0)
    return s


if __name__ == "__main__":

    start = "0" + input("enter binary: ") + "0"
    start = [int(c) for c in start]

    PARAM = float(input("Enter delta for avg of each cell: "))

    h = int(input("enter number of generations: "))
    w = len(start)-2
  
    # creating new Image object
    img = Image.new("RGB", (w, h))
  
    # create rectangle image
    img1 = ImageDraw.Draw(img)  

    #update each row
    for j in range(1, h+1):
        for i in range(1, w+1):
            img1.rectangle([(i-1, j-1), (i, j)], fill=(int(255*start[i]), 0, 255))
        start = rep(start)
        
    img.show()
    img.save(f"delta{PARAM}.png")
